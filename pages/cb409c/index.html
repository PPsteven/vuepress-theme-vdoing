<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>慢慢买比价爬虫(JS 逆向破解) | 软微9133</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.png">
    <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.c3bb331d.css" as="style"><link rel="preload" href="/assets/js/app.4d262576.js" as="script"><link rel="preload" href="/assets/js/2.5acc95b9.js" as="script"><link rel="preload" href="/assets/js/3.ddda9efe.js" as="script"><link rel="prefetch" href="/assets/js/10.07440490.js"><link rel="prefetch" href="/assets/js/100.1cdeb2db.js"><link rel="prefetch" href="/assets/js/101.a99a5b3f.js"><link rel="prefetch" href="/assets/js/102.b4f9053a.js"><link rel="prefetch" href="/assets/js/103.052a36a1.js"><link rel="prefetch" href="/assets/js/104.43bc9bf0.js"><link rel="prefetch" href="/assets/js/105.faedc301.js"><link rel="prefetch" href="/assets/js/106.30f32f09.js"><link rel="prefetch" href="/assets/js/107.4bcc9bc3.js"><link rel="prefetch" href="/assets/js/108.027d889e.js"><link rel="prefetch" href="/assets/js/109.262972a7.js"><link rel="prefetch" href="/assets/js/11.89af6641.js"><link rel="prefetch" href="/assets/js/110.7fc54642.js"><link rel="prefetch" href="/assets/js/111.4afb5b76.js"><link rel="prefetch" href="/assets/js/112.a1d564b7.js"><link rel="prefetch" href="/assets/js/113.363fbcc6.js"><link rel="prefetch" href="/assets/js/114.8aa897dc.js"><link rel="prefetch" href="/assets/js/115.3ad8cc31.js"><link rel="prefetch" href="/assets/js/116.1f29af7c.js"><link rel="prefetch" href="/assets/js/117.93335ec4.js"><link rel="prefetch" href="/assets/js/118.0d040032.js"><link rel="prefetch" href="/assets/js/119.947ae09b.js"><link rel="prefetch" href="/assets/js/12.82f1ab23.js"><link rel="prefetch" href="/assets/js/120.fbcd2fbd.js"><link rel="prefetch" href="/assets/js/121.ae3622d4.js"><link rel="prefetch" href="/assets/js/122.4dc7166b.js"><link rel="prefetch" href="/assets/js/123.6d81d948.js"><link rel="prefetch" href="/assets/js/124.dcfb3908.js"><link rel="prefetch" href="/assets/js/125.77dd6c72.js"><link rel="prefetch" href="/assets/js/126.2a569674.js"><link rel="prefetch" href="/assets/js/127.e27e7929.js"><link rel="prefetch" href="/assets/js/128.03656149.js"><link rel="prefetch" href="/assets/js/129.35616865.js"><link rel="prefetch" href="/assets/js/13.37ac3b26.js"><link rel="prefetch" href="/assets/js/130.30888fc0.js"><link rel="prefetch" href="/assets/js/131.b48452fd.js"><link rel="prefetch" href="/assets/js/132.07e94434.js"><link rel="prefetch" href="/assets/js/133.bed77a7c.js"><link rel="prefetch" href="/assets/js/134.ecf9c7c8.js"><link rel="prefetch" href="/assets/js/135.27cd7607.js"><link rel="prefetch" href="/assets/js/136.a44396d7.js"><link rel="prefetch" href="/assets/js/137.2744e307.js"><link rel="prefetch" href="/assets/js/138.4b3ce68f.js"><link rel="prefetch" href="/assets/js/139.0cfcb353.js"><link rel="prefetch" href="/assets/js/14.f2c90fe6.js"><link rel="prefetch" href="/assets/js/140.649fff31.js"><link rel="prefetch" href="/assets/js/141.621a2882.js"><link rel="prefetch" href="/assets/js/142.dae9c041.js"><link rel="prefetch" href="/assets/js/143.666b5cbf.js"><link rel="prefetch" href="/assets/js/144.72a40189.js"><link rel="prefetch" href="/assets/js/145.4032526d.js"><link rel="prefetch" href="/assets/js/146.1a2ea636.js"><link rel="prefetch" href="/assets/js/147.0d7db72c.js"><link rel="prefetch" href="/assets/js/148.20dbfc05.js"><link rel="prefetch" href="/assets/js/149.c7305a3f.js"><link rel="prefetch" href="/assets/js/15.5818c400.js"><link rel="prefetch" href="/assets/js/150.3be5578c.js"><link rel="prefetch" href="/assets/js/151.25fff61d.js"><link rel="prefetch" href="/assets/js/152.58c671d7.js"><link rel="prefetch" href="/assets/js/153.3258d472.js"><link rel="prefetch" href="/assets/js/154.da2a570b.js"><link rel="prefetch" href="/assets/js/155.ce455668.js"><link rel="prefetch" href="/assets/js/156.0c3cc00f.js"><link rel="prefetch" href="/assets/js/157.c6766ca7.js"><link rel="prefetch" href="/assets/js/158.ff2fa4fe.js"><link rel="prefetch" href="/assets/js/159.9d78f8b1.js"><link rel="prefetch" href="/assets/js/16.d24bf8d9.js"><link rel="prefetch" href="/assets/js/160.f2f69ab1.js"><link rel="prefetch" href="/assets/js/161.35741407.js"><link rel="prefetch" href="/assets/js/162.079f0ae1.js"><link rel="prefetch" href="/assets/js/163.f5e25f1d.js"><link rel="prefetch" href="/assets/js/164.b8b82193.js"><link rel="prefetch" href="/assets/js/165.6ddf8426.js"><link rel="prefetch" href="/assets/js/166.23d96906.js"><link rel="prefetch" href="/assets/js/167.ada9366f.js"><link rel="prefetch" href="/assets/js/168.27bd9758.js"><link rel="prefetch" href="/assets/js/169.10b12e30.js"><link rel="prefetch" href="/assets/js/17.1a22f0b4.js"><link rel="prefetch" href="/assets/js/170.37d23481.js"><link rel="prefetch" href="/assets/js/171.75b5af0f.js"><link rel="prefetch" href="/assets/js/172.4ed05ea1.js"><link rel="prefetch" href="/assets/js/173.c047c140.js"><link rel="prefetch" href="/assets/js/174.6b80d1e5.js"><link rel="prefetch" href="/assets/js/175.e1690a5b.js"><link rel="prefetch" href="/assets/js/176.7a58040f.js"><link rel="prefetch" href="/assets/js/177.5e51779c.js"><link rel="prefetch" href="/assets/js/178.e90eb8c5.js"><link rel="prefetch" href="/assets/js/179.941bebb7.js"><link rel="prefetch" href="/assets/js/18.9787b532.js"><link rel="prefetch" href="/assets/js/180.6adf04cc.js"><link rel="prefetch" href="/assets/js/181.9975ed89.js"><link rel="prefetch" href="/assets/js/182.812903db.js"><link rel="prefetch" href="/assets/js/183.062e025a.js"><link rel="prefetch" href="/assets/js/184.a3608b05.js"><link rel="prefetch" href="/assets/js/185.17b9e640.js"><link rel="prefetch" href="/assets/js/186.915e625e.js"><link rel="prefetch" href="/assets/js/187.05404498.js"><link rel="prefetch" href="/assets/js/188.b53c26b2.js"><link rel="prefetch" href="/assets/js/189.c8aa0b10.js"><link rel="prefetch" href="/assets/js/19.b5e63b7f.js"><link rel="prefetch" href="/assets/js/190.8a0e8b7d.js"><link rel="prefetch" href="/assets/js/191.d1ea8d78.js"><link rel="prefetch" href="/assets/js/192.488e65a8.js"><link rel="prefetch" href="/assets/js/193.1c947fa6.js"><link rel="prefetch" href="/assets/js/194.3a6f4c5d.js"><link rel="prefetch" href="/assets/js/195.d1a71fde.js"><link rel="prefetch" href="/assets/js/196.e426e892.js"><link rel="prefetch" href="/assets/js/197.76e4ec31.js"><link rel="prefetch" href="/assets/js/198.9c396e1f.js"><link rel="prefetch" href="/assets/js/199.8f1d0b68.js"><link rel="prefetch" href="/assets/js/20.d08fbffe.js"><link rel="prefetch" href="/assets/js/200.33f7c7b4.js"><link rel="prefetch" href="/assets/js/201.4f6242e4.js"><link rel="prefetch" href="/assets/js/202.e17138ab.js"><link rel="prefetch" href="/assets/js/203.d4d1e3f8.js"><link rel="prefetch" href="/assets/js/204.623ebc53.js"><link rel="prefetch" href="/assets/js/205.669ff410.js"><link rel="prefetch" href="/assets/js/206.708522ed.js"><link rel="prefetch" href="/assets/js/207.1e9375dc.js"><link rel="prefetch" href="/assets/js/208.fd117e76.js"><link rel="prefetch" href="/assets/js/209.347378bc.js"><link rel="prefetch" href="/assets/js/21.1b3e4bc1.js"><link rel="prefetch" href="/assets/js/210.5628e445.js"><link rel="prefetch" href="/assets/js/211.b0674999.js"><link rel="prefetch" href="/assets/js/212.5cafeee9.js"><link rel="prefetch" href="/assets/js/213.1195ebd5.js"><link rel="prefetch" href="/assets/js/214.b42aa6ee.js"><link rel="prefetch" href="/assets/js/215.f2f34596.js"><link rel="prefetch" href="/assets/js/216.9e8353f8.js"><link rel="prefetch" href="/assets/js/217.653610c8.js"><link rel="prefetch" href="/assets/js/218.ff2a2b99.js"><link rel="prefetch" href="/assets/js/219.810d69e7.js"><link rel="prefetch" href="/assets/js/22.90c0b6d6.js"><link rel="prefetch" href="/assets/js/220.c619bf05.js"><link rel="prefetch" href="/assets/js/221.1f1bbf62.js"><link rel="prefetch" href="/assets/js/222.76edfa33.js"><link rel="prefetch" href="/assets/js/223.17ef82dd.js"><link rel="prefetch" href="/assets/js/224.33220d3d.js"><link rel="prefetch" href="/assets/js/225.7878c3c1.js"><link rel="prefetch" href="/assets/js/226.b4f93fb5.js"><link rel="prefetch" href="/assets/js/227.b655606e.js"><link rel="prefetch" href="/assets/js/228.7177a3ec.js"><link rel="prefetch" href="/assets/js/229.174d38c1.js"><link rel="prefetch" href="/assets/js/23.c6e3d021.js"><link rel="prefetch" href="/assets/js/230.5b255d96.js"><link rel="prefetch" href="/assets/js/231.9a675861.js"><link rel="prefetch" href="/assets/js/232.cd7808f8.js"><link rel="prefetch" href="/assets/js/233.e5051e97.js"><link rel="prefetch" href="/assets/js/234.250d941d.js"><link rel="prefetch" href="/assets/js/235.d27bb592.js"><link rel="prefetch" href="/assets/js/236.d9920521.js"><link rel="prefetch" href="/assets/js/237.77639123.js"><link rel="prefetch" href="/assets/js/238.bcd34b57.js"><link rel="prefetch" href="/assets/js/239.a1e3516c.js"><link rel="prefetch" href="/assets/js/24.f333430e.js"><link rel="prefetch" href="/assets/js/240.3d2da1f7.js"><link rel="prefetch" href="/assets/js/241.1256232d.js"><link rel="prefetch" href="/assets/js/242.1e99dc85.js"><link rel="prefetch" href="/assets/js/243.7d12e6c4.js"><link rel="prefetch" href="/assets/js/244.fc9cc9f1.js"><link rel="prefetch" href="/assets/js/245.23427d47.js"><link rel="prefetch" href="/assets/js/246.66006b67.js"><link rel="prefetch" href="/assets/js/247.38fbdbf8.js"><link rel="prefetch" href="/assets/js/248.b91e5f4f.js"><link rel="prefetch" href="/assets/js/249.58edc262.js"><link rel="prefetch" href="/assets/js/25.b501ed8f.js"><link rel="prefetch" href="/assets/js/250.dde2aa3f.js"><link rel="prefetch" href="/assets/js/251.741df25a.js"><link rel="prefetch" href="/assets/js/252.4b516301.js"><link rel="prefetch" href="/assets/js/253.f161e9c9.js"><link rel="prefetch" href="/assets/js/254.592a5576.js"><link rel="prefetch" href="/assets/js/255.93954a29.js"><link rel="prefetch" href="/assets/js/256.c0fc63be.js"><link rel="prefetch" href="/assets/js/257.7417a74b.js"><link rel="prefetch" href="/assets/js/258.e2cc46ee.js"><link rel="prefetch" href="/assets/js/259.ef7c01e2.js"><link rel="prefetch" href="/assets/js/26.a8d7eef2.js"><link rel="prefetch" href="/assets/js/260.bf16e888.js"><link rel="prefetch" href="/assets/js/261.e4c6b219.js"><link rel="prefetch" href="/assets/js/262.cb37c6c2.js"><link rel="prefetch" href="/assets/js/263.2b686b05.js"><link rel="prefetch" href="/assets/js/264.b104bc2e.js"><link rel="prefetch" href="/assets/js/265.c08ee46e.js"><link rel="prefetch" href="/assets/js/27.5c05e541.js"><link rel="prefetch" href="/assets/js/28.5e54782c.js"><link rel="prefetch" href="/assets/js/29.b5be858c.js"><link rel="prefetch" href="/assets/js/30.1838e35d.js"><link rel="prefetch" href="/assets/js/31.2d0e436e.js"><link rel="prefetch" href="/assets/js/32.45b0a9ca.js"><link rel="prefetch" href="/assets/js/33.382a9b42.js"><link rel="prefetch" href="/assets/js/34.dddda69d.js"><link rel="prefetch" href="/assets/js/35.18f80a1f.js"><link rel="prefetch" href="/assets/js/36.af8d49ed.js"><link rel="prefetch" href="/assets/js/37.230269da.js"><link rel="prefetch" href="/assets/js/38.77a2b388.js"><link rel="prefetch" href="/assets/js/39.9735f624.js"><link rel="prefetch" href="/assets/js/4.c39a6766.js"><link rel="prefetch" href="/assets/js/40.a84a6aad.js"><link rel="prefetch" href="/assets/js/41.2834b704.js"><link rel="prefetch" href="/assets/js/42.221e2ace.js"><link rel="prefetch" href="/assets/js/43.111d6b78.js"><link rel="prefetch" href="/assets/js/44.4a7ee8f2.js"><link rel="prefetch" href="/assets/js/45.0cf7438a.js"><link rel="prefetch" href="/assets/js/46.59b50d30.js"><link rel="prefetch" href="/assets/js/47.0c2ff9bd.js"><link rel="prefetch" href="/assets/js/48.ac39ad5e.js"><link rel="prefetch" href="/assets/js/49.b9914a0a.js"><link rel="prefetch" href="/assets/js/5.dc90a248.js"><link rel="prefetch" href="/assets/js/50.9c28e2b5.js"><link rel="prefetch" href="/assets/js/51.1f94d464.js"><link rel="prefetch" href="/assets/js/52.5fcc7dd5.js"><link rel="prefetch" href="/assets/js/53.58c0dcee.js"><link rel="prefetch" href="/assets/js/54.fa6ac380.js"><link rel="prefetch" href="/assets/js/55.5a54ba99.js"><link rel="prefetch" href="/assets/js/56.b364676e.js"><link rel="prefetch" href="/assets/js/57.bda2f022.js"><link rel="prefetch" href="/assets/js/58.626f94b7.js"><link rel="prefetch" href="/assets/js/59.7df98065.js"><link rel="prefetch" href="/assets/js/6.98d7fb2f.js"><link rel="prefetch" href="/assets/js/60.074304c5.js"><link rel="prefetch" href="/assets/js/61.c83e5689.js"><link rel="prefetch" href="/assets/js/62.447a39a2.js"><link rel="prefetch" href="/assets/js/63.66cead64.js"><link rel="prefetch" href="/assets/js/64.d0989410.js"><link rel="prefetch" href="/assets/js/65.9259995f.js"><link rel="prefetch" href="/assets/js/66.ce55c2aa.js"><link rel="prefetch" href="/assets/js/67.fe751a1e.js"><link rel="prefetch" href="/assets/js/68.a92acfcb.js"><link rel="prefetch" href="/assets/js/69.ada57a61.js"><link rel="prefetch" href="/assets/js/7.c2145f09.js"><link rel="prefetch" href="/assets/js/70.17f7fde5.js"><link rel="prefetch" href="/assets/js/71.4194cd68.js"><link rel="prefetch" href="/assets/js/72.48dfac0d.js"><link rel="prefetch" href="/assets/js/73.6fd726ca.js"><link rel="prefetch" href="/assets/js/74.6267649a.js"><link rel="prefetch" href="/assets/js/75.1d3f3777.js"><link rel="prefetch" href="/assets/js/76.658cf18c.js"><link rel="prefetch" href="/assets/js/77.d31887b9.js"><link rel="prefetch" href="/assets/js/78.867be965.js"><link rel="prefetch" href="/assets/js/79.3bebf4f3.js"><link rel="prefetch" href="/assets/js/8.108ce8a3.js"><link rel="prefetch" href="/assets/js/80.d08da0b3.js"><link rel="prefetch" href="/assets/js/81.c04ec46d.js"><link rel="prefetch" href="/assets/js/82.9a5efbb7.js"><link rel="prefetch" href="/assets/js/83.3c9dc63c.js"><link rel="prefetch" href="/assets/js/84.abbd61ff.js"><link rel="prefetch" href="/assets/js/85.dc770be3.js"><link rel="prefetch" href="/assets/js/86.5a73dca8.js"><link rel="prefetch" href="/assets/js/87.2b80ec59.js"><link rel="prefetch" href="/assets/js/88.93dc1d47.js"><link rel="prefetch" href="/assets/js/89.4bb22e53.js"><link rel="prefetch" href="/assets/js/9.da2a2272.js"><link rel="prefetch" href="/assets/js/90.17bb22d7.js"><link rel="prefetch" href="/assets/js/91.c0a717da.js"><link rel="prefetch" href="/assets/js/92.028ff201.js"><link rel="prefetch" href="/assets/js/93.05812d4d.js"><link rel="prefetch" href="/assets/js/94.c35d1af7.js"><link rel="prefetch" href="/assets/js/95.4c264a8b.js"><link rel="prefetch" href="/assets/js/96.f713e3ca.js"><link rel="prefetch" href="/assets/js/97.30caaf06.js"><link rel="prefetch" href="/assets/js/98.76bd7d9a.js"><link rel="prefetch" href="/assets/js/99.3605feb5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c3bb331d.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="软微9133" class="logo"> <span class="site-name can-hide">软微9133</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><!----> <span class="title" style="display:;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e7311f/" class="nav-link">Docker</a></li><li class="dropdown-subitem"><a href="/pages/fccc5c/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/pages/46c53b/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/fadef0/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><!----> <span class="title" style="display:;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/f9f7ec/" class="nav-link">vue-todos 学习</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><!----> <span class="title" style="display:;">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据结构</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b248c0/" class="nav-link">贪心算法</a></li><li class="dropdown-subitem"><a href="/pages/9410cd/" class="nav-link">双指针与滑动窗口</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础知识" class="dropdown-title"><!----> <span class="title" style="display:;">计算机基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>计算机网络</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c9e990/" class="nav-link">《图解HTTP》笔记</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><!----> <span class="title" style="display:;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a583c4/" class="nav-link">Python</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CheetSheet" class="dropdown-title"><!----> <span class="title" style="display:;">CheetSheet</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3f6ec3/" class="nav-link">docker</a></li><li class="dropdown-item"><!----> <a href="/pages/752e0b/" class="nav-link">git</a></li></ul></div></div><div class="nav-item"><a href="/pages/1886cc/" class="nav-link">环境配置</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">其它</a> <span class="title" style="display:none;">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/e9dfa9/" class="nav-link">PHP</a></li><li class="dropdown-item"><!----> <a href="/pages/8e768d/" class="nav-link">Hexo</a></li><li class="dropdown-item"><!----> <a href="/pages/d6fe55/" class="nav-link">转载文章</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/PPsteven/博客笔记" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20201104012528.png"> <div class="blogger-info"><h3>PPsteven</h3> <span>屁屁斯蒂芬</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><!----> <span class="title" style="display:;">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>后端</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/e7311f/" class="nav-link">Docker</a></li><li class="dropdown-subitem"><a href="/pages/fccc5c/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/pages/46c53b/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/fadef0/" class="nav-link">Git</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><!----> <span class="title" style="display:;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Vue</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/f9f7ec/" class="nav-link">vue-todos 学习</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据结构与算法" class="dropdown-title"><!----> <span class="title" style="display:;">数据结构与算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据结构</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/b248c0/" class="nav-link">贪心算法</a></li><li class="dropdown-subitem"><a href="/pages/9410cd/" class="nav-link">双指针与滑动窗口</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="计算机基础知识" class="dropdown-title"><!----> <span class="title" style="display:;">计算机基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>计算机网络</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/c9e990/" class="nav-link">《图解HTTP》笔记</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><!----> <span class="title" style="display:;">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Python</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/a583c4/" class="nav-link">Python</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="CheetSheet" class="dropdown-title"><!----> <span class="title" style="display:;">CheetSheet</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/3f6ec3/" class="nav-link">docker</a></li><li class="dropdown-item"><!----> <a href="/pages/752e0b/" class="nav-link">git</a></li></ul></div></div><div class="nav-item"><a href="/pages/1886cc/" class="nav-link">环境配置</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="收藏" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">收藏</a> <span class="title" style="display:none;">收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/beb6c0bd8a66cea6/" class="nav-link">网站</a></li><li class="dropdown-item"><!----> <a href="/pages/eee83a9211a70f9d/" class="nav-link">资源</a></li><li class="dropdown-item"><!----> <a href="/pages/12df8ace52d493f6/" class="nav-link">Vue资源</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">其它</a> <span class="title" style="display:none;">其它</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/e9dfa9/" class="nav-link">PHP</a></li><li class="dropdown-item"><!----> <a href="/pages/8e768d/" class="nav-link">Hexo</a></li><li class="dropdown-item"><!----> <a href="/pages/d6fe55/" class="nav-link">转载文章</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/PPsteven/博客笔记" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/pages/cb409c/" aria-current="page" class="active sidebar-link">慢慢买比价爬虫(JS-逆向破解)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/cb409c/#http抓包分析" class="sidebar-link">Http抓包分析</a></li><li class="sidebar-sub-header"><a href="/pages/cb409c/#请求分析" class="sidebar-link">请求分析</a></li><li class="sidebar-sub-header"><a href="/pages/cb409c/#寻找变动的字段" class="sidebar-link">寻找变动的字段</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/cb409c/#请求头提交的数据-form-data" class="sidebar-link">请求头提交的数据 (Form data)</a></li><li class="sidebar-sub-header"><a href="/pages/cb409c/#请求头报文-request-header" class="sidebar-link">请求头报文(Request Header)</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/cb409c/#js代码分析" class="sidebar-link">JS代码分析</a></li><li class="sidebar-sub-header"><a href="/pages/cb409c/#token-参数还原" class="sidebar-link">token 参数还原</a></li><li class="sidebar-sub-header"><a href="/pages/cb409c/#authorization-破解" class="sidebar-link">Authorization 破解</a></li><li class="sidebar-sub-header"><a href="/pages/cb409c/#github-仓库" class="sidebar-link">Github 仓库</a></li><li class="sidebar-sub-header"><a href="/pages/cb409c/#参考资料" class="sidebar-link">参考资料</a></li></ul></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1b7c64bb><div class="articleInfo" data-v-1b7c64bb><ul class="breadcrumbs" data-v-1b7c64bb><li data-v-1b7c64bb><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-1b7c64bb></a></li> <li data-v-1b7c64bb><a href="/categories/?category=%E7%88%AC%E8%99%AB" title="分类" data-v-1b7c64bb>爬虫</a></li> <!----></ul> <div class="info" data-v-1b7c64bb><div title="作者" class="author iconfont icon-touxiang" data-v-1b7c64bb><a href="https://github.com/ppsteven" target="_blank" title="作者" class="beLink" data-v-1b7c64bb>ppsteven</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1b7c64bb><a href="javascript:;" data-v-1b7c64bb>2021-01-14</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          慢慢买比价爬虫(JS 逆向破解)
        </h1> <div class="theme-vdoing-content content__default"><p>项目中涉及到对淘宝，京东商品历史价格的数据采集，直接爬虫是获取不到历史数据的。需要借助第三方比价平台——<a href="http://www.manmanbuy.com/" target="_blank" rel="noopener noreferrer">慢慢买<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。慢慢买是全网比价平台，主要是通过实习爬取淘宝，京东，天猫等电扇购物平台，向用户提供多平台的商品价格比较。同时，慢慢买还提供历史价格查询的功能。作为一个爬虫平台，慢慢买在反爬虫上也是花费了不少心思。</p> <h2 id="http抓包分析"><a href="#http抓包分析" class="header-anchor">#</a> Http抓包分析</h2> <p>首先，进入慢慢买历史价格查询平台，复制一个淘宝京东的链接进行查询。</p> <p><img src="/assets/img/image-20210114113250055.bc20e109.png" alt="image-20210114113250055"></p> <p>通过 Chrome 自带的开发者工具-&gt;Network 进行http抓包分析</p> <ol><li>首先找到价格数据，价格数据中一定有238</li> <li>搜索所有请求到的资源，查看哪些有238</li> <li>找到对应的请求</li></ol> <img src="/assets/img/image-20210114131939821.21ac606d.png" alt="image-20210114131939821" style="width:80%;"> <h2 id="请求分析"><a href="#请求分析" class="header-anchor">#</a> 请求分析</h2> <p>通过查看 <code>Requests Headers</code> 的头部信息，发现这是一个POST请求，只要把参数填入 <code>From data</code>即可。</p> <img src="/assets/img/image-20210114132139111.dc8e2f61.png" alt="image-20210114132139111" style="width:80%;"> <ul><li><p>请求地址：http://tool.manmanbuy.com/api.ashx</p></li> <li><p>请求方式：POST</p></li> <li><p>请求数据：</p> <table><thead><tr><th>Key</th> <th>Value</th> <th>含义</th></tr></thead> <tbody><tr><td>method</td> <td>getHistoryTrend</td> <td>固定不变</td></tr> <tr><td>key</td> <td>https://item.jd.com/6290488.html</td> <td>原商品链接（变）</td></tr> <tr><td>t</td> <td>1610601399358</td> <td>时间戳（变）</td></tr> <tr><td>token</td> <td>DAF418E3848F4B4BB1C8CA6F23AD331D</td> <td>token （变）</td></tr></tbody></table></li> <li><p>请求报文分析</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Accept: */*  # 接收所有类型的数据
Accept-Encoding: gzip, deflate # 接收编码方式
Accept-Language: zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7 # 接收语言
Authorization: BasicAuth D8DD2812A942776AF9ED750C2D6D7539BF204F7C0B0FB414E6CEBD28536A99D07304FA7BFFBB2BDD6B9B46823A9D19FA751316693F17DD79FF26D70E2EBA1BF31918AB09FC305FCFB80352187AE32269B8D8DB1977F84F1E # Basic 身份验证
Content-Length: 122 # 内容长度
Content-Type: application/x-www-form-urlencoded; charset=UTF-8 # 报文主体的类型：通过 x-www-form-urlencoded 提交主体
Cookie: _ga=GA1.2.614520810.1610543725; _gid=GA1.2.187844233.1610543725; Hm_lvt_85f48cee3e51cd48eaba80781b243db3=1608561378,1608561379,1610539536,1610594558; ASP.NET_SessionId=oyiwn2k5xvhc2d5s3owcy4ma; radius=115.174.219.229; uudid=cms4cfa3810-b108-a48c-1a2f-eb4c72b23256; Hm_lvt_01a310dc95b71311522403c3237671ae=1608561378,1610539536,1610595007,1610595218; Hm_lpvt_85f48cee3e51cd48eaba80781b243db3=1610601329; Hm_lpvt_01a310dc95b71311522403c3237671ae=1610601329 # Cookie 
Host: tool.manmanbuy.com # 主机地址
Origin: http://tool.manmanbuy.com # Origin
Proxy-Connection: keep-alive # 持续连接
Referer: http://tool.manmanbuy.com/historyLowest.aspx?url=https%3A//item.jd.com/6290488.html # 是从哪个地址请求来的
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 11_1_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.141 Safari/537.36 # User-Agent
X-Requested-With: XMLHttpRequest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>其中比较重要的是 Cookie 和 Authorization。</p></li></ul> <h2 id="寻找变动的字段"><a href="#寻找变动的字段" class="header-anchor">#</a> 寻找变动的字段</h2> <p>通过多次请求，比较每次请求时候变动的请求头，这样才能知道哪些字段要去重点研究攻克。可以通过 代码比较工具去分析每次变动的字段。</p> <p>这里比较两个部分</p> <ul><li>请求头提交的数据</li> <li>请求头报文</li></ul> <blockquote><p>工具：<a href="https://www.matools.com/compare" target="_blank" rel="noopener noreferrer">在线代码对比/归并<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <h3 id="请求头提交的数据-form-data"><a href="#请求头提交的数据-form-data" class="header-anchor">#</a> 请求头提交的数据 (Form data)</h3> <p>method 是固定的，key，t 分别是商品地址和时间戳。</p> <p><strong>难点是 token 字段的生成方式</strong></p> <img src="/assets/img/image-20210114134237228.66661c0a.png" alt="image-20210114134237228" style="width:80%;"> <h3 id="请求头报文-request-header"><a href="#请求头报文-request-header" class="header-anchor">#</a> 请求头报文(Request Header)</h3> <img src="/assets/img/image-20210114134630360.609e95a7.png" alt="image-20210114134630360" style="width:80%;"> <p>请求头中 Authorization 代表的是 Web端 对访问用户身份的认证，这个知识点，在 <a href="./pages/8e336c">08.确认访问用户身份的认证</a> 已经写过，Basic Auth 属于一种基本的认证方式，本质上就是通过 Base64 对账户密码进行编码后传输，编码可以通过Base64 反编码，所以本质上就是一种明文的传输方式。所以，我们可以尝试反编译一下。</p> <h4 id="反编译-authorization"><a href="#反编译-authorization" class="header-anchor">#</a> 反编译 Authorization</h4> <h4 id="_1-python-实现-base64-编码-解码"><a href="#_1-python-实现-base64-编码-解码" class="header-anchor">#</a> 1. Python 实现 Base64 编码/解码</h4> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> base64

<span class="token keyword">def</span> <span class="token function">get_basic_auth_str</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">:</span>
  temp_str <span class="token operator">=</span> username <span class="token operator">+</span> <span class="token string">':'</span> <span class="token operator">+</span> password
  bytesString <span class="token operator">=</span> temp_str<span class="token punctuation">.</span>encode<span class="token punctuation">(</span>encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span>  <span class="token comment"># 转成bytes string</span>
  encodestr <span class="token operator">=</span> base64<span class="token punctuation">.</span>b64encode<span class="token punctuation">(</span>bytesString<span class="token punctuation">)</span>  <span class="token comment"># base64 编码</span>
  <span class="token keyword">return</span> <span class="token string">'Basic '</span> <span class="token operator">+</span> encodestr<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span> 

<span class="token keyword">def</span> <span class="token function">decode_basic_auth_str</span><span class="token punctuation">(</span>auth_str<span class="token punctuation">)</span><span class="token punctuation">:</span>
    bytesString <span class="token operator">=</span> auth_str<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span>
    decode_str <span class="token operator">=</span> base64<span class="token punctuation">.</span>b64decode<span class="token punctuation">(</span>bytesString<span class="token punctuation">)</span>
    <span class="token keyword">return</span> decode_str<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    auth_str <span class="token operator">=</span> get_basic_auth_str<span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token string">'test'</span><span class="token punctuation">)</span> <span class="token comment"># Basic VG9tOnRlc3Q=</span>
    decode_str <span class="token operator">=</span> decode_basic_auth_str<span class="token punctuation">(</span><span class="token string">'VG9tOnRlc3Q='</span><span class="token punctuation">)</span> <span class="token comment"># Tom:test</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>尝试通过 Base64 去反编译加密后的字符串，发现解析错误。</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> util <span class="token keyword">import</span> decode_basic_auth_str                                                                          
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> decode_basic_auth_str<span class="token punctuation">(</span><span class="token string">'D8DD2812A942776AF9ED750C2D6D7539BF204F7C0B0FB414E6CEBD28536A99D07304FA7BFFBB2BDD6B9B46823A9D19FA751316693F17DD79FF26D70E2EBA1BF31918AB09FC305FCFF5CC0120F0A255CA5D37BDC0EBFFB3CD'</span><span class="token punctuation">)</span>   
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> UnicodeDecodeError<span class="token punctuation">:</span> <span class="token string">'utf-8'</span> codec can't decode byte <span class="token number">0xc0</span> <span class="token keyword">in</span> position <span class="token number">1</span><span class="token punctuation">:</span> invalid start byte
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2-在线base编码-解码网站"><a href="#_2-在线base编码-解码网站" class="header-anchor">#</a> 2. 在线Base编码/解码网站</h4> <p>通过在线编码解码网站也是发现全部都是乱码</p> <img src="/assets/img/image-20210114142147404.7511e221.png" alt="image-20210114142147404" style="width:80%;"> <h4 id="结论"><a href="#结论" class="header-anchor">#</a> 结论</h4> <p>经过代码比较后，我们发现有两个字段无法解决</p> <ul><li>Authorization 不是通过传统的 Basic64 加密的</li> <li>token</li></ul> <h2 id="js代码分析"><a href="#js代码分析" class="header-anchor">#</a> JS代码分析</h2> <p>知道了目标，就可以查看具体发送请求的地方，以及 Authorization 和 token 生成的逻辑。</p> <p>首先，查看 <code>/api.aspx</code> 是哪里发送出来的</p> <img src="/assets/img/image-20210114145805844.8dce3c08.png" alt="image-20210114145805844" style="width:80%;"> <p>然后，可以通过打上断点，查找发送数据的代码。但是这里并不是拼接数据的地方。</p> <img src="/assets/img/image-20210114150248508.4b8ad279.png" alt="image-20210114150248508" style="width:80%;"> <p>在 Call Stack 调用栈中，不断的向上排查，最终找到拼接数据的地方，可以看出 ajaxpost 这里是真正拼接数据的地方。</p> <img src="/assets/img/image-20210114150718545.6f8447d2.png" alt="image-20210114150718545" style="width:80%;"> <p>在调试中，找到了 <code>form data</code> 的数据</p> <img src="/assets/img/image-20210114151327739.edc32cf9.png" alt="image-20210114151327739" style="width:80%;"> <p>找到了数据后，才发现真正难的地方，这里的 JavaScript 代码都是经过加密的，由于不知道函数和变量的含义，去破解 token 和 Authorization 字段无从下手。</p> <p>如这段代码，变量名都是通过 <code>_0x365d()</code> 函数，加密过了，只要我们破解这个函数即可还原。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token string">'success'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">_0x4ce40a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> _0x1c6814 <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string">'LrBHV'</span><span class="token operator">:</span> <span class="token function">_0x365d</span><span class="token punctuation">(</span><span class="token string">'0x2e'</span><span class="token punctuation">,</span> <span class="token string">'OG@1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">'nyVkE'</span><span class="token operator">:</span> <span class="token function">_0x365d</span><span class="token punctuation">(</span><span class="token string">'0x2f'</span><span class="token punctuation">,</span> <span class="token string">'[0Fm'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">'qsLdn'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x23683a</span><span class="token punctuation">(</span><span class="token parameter">_0x46f029<span class="token punctuation">,</span> _0x5eba10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">_0x46f029</span><span class="token punctuation">(</span>_0x5eba10<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">_0x365d</span><span class="token punctuation">(</span><span class="token string">'0x30'</span><span class="token punctuation">,</span> <span class="token string">'BQd]'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> _0x1c6814<span class="token punctuation">[</span><span class="token function">_0x365d</span><span class="token punctuation">(</span><span class="token string">'0x31'</span><span class="token punctuation">,</span> <span class="token string">'OG@1'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      w<span class="token punctuation">[</span>c<span class="token punctuation">]</span><span class="token punctuation">(</span>_0x1c6814<span class="token punctuation">[</span><span class="token function">_0x365d</span><span class="token punctuation">(</span><span class="token string">'0x32'</span><span class="token punctuation">,</span> <span class="token string">'b8bF'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      _0x3aca29 <span class="token operator">&amp;&amp;</span> _0x1c6814<span class="token punctuation">[</span><span class="token function">_0x365d</span><span class="token punctuation">(</span><span class="token string">'0x33'</span><span class="token punctuation">,</span> <span class="token string">'xOX6'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x3aca29<span class="token punctuation">,</span> _0x4ce40a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>下面我们看看这段加密代码，发现有70多行，手动破解太费劲了。</p> <img src="/assets/img/image-20210114152610556.fa8a7403.png" alt="image-20210114152610556" style="width:80%;"> <p>而且通过 <code>encode_version</code> 发现，这是使用 jsjiami.com 做的加密。</p> <img src="/assets/img/image-20210114152900610.6524e46f.png" alt="image-20210114152900610" style="width:80%;"> <p>首先，要先把 js 代码调试出来</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> window <span class="token operator">=</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span> <span class="token comment">// 因为 node.js 没有 window，可以先至为 undefined</span>
<span class="token keyword">var</span> encode_version <span class="token operator">=</span> <span class="token string">'jsjiami.com.v5'</span><span class="token punctuation">,</span>
	nljdj <span class="token operator">=</span> <span class="token string">'__0xa3e63'</span><span class="token punctuation">,</span>
	__0xa3e63 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'TURrcMKg'</span><span class="token punctuation">,</span> <span class="token string">'bMKywoIHdw=='</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_0x58a45a<span class="token punctuation">,</span> _0x50ac96</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">(</span>__0xa3e63<span class="token punctuation">,</span> <span class="token number">0x1dc</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">_0x365d</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_0x5ce1df<span class="token punctuation">,</span> _0x37ef48</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
                                               
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">_0x365d</span><span class="token punctuation">(</span><span class="token string">'0x22'</span><span class="token punctuation">,</span> <span class="token string">'G7RY'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//  输出 BasicAuth                                   </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>这里使用 <code>execjs</code> 和 正则表达式 去解析 JavaScript 文件</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> re<span class="token punctuation">,</span> execjs

<span class="token keyword">def</span> <span class="token function">callJsFunc</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> func<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot; 调用 js 函数&quot;&quot;&quot;</span>
    v1<span class="token punctuation">,</span> v2 <span class="token operator">=</span> s<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">&quot;'{}'&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token string">'_0x365d(%s, %s)'</span> <span class="token operator">%</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 加密的 js 文件</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">&quot;customRequest.js&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fr<span class="token punctuation">:</span>
    raw_code <span class="token operator">=</span> fr<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ctx <span class="token operator">=</span> execjs<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>raw_code<span class="token punctuation">)</span>
<span class="token comment"># 正则匹配出，两个输入参数</span>
pattern <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">r&quot;_0x365d\(('.*?'), ('.*?')\)&quot;</span><span class="token punctuation">,</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>
trans_code <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> callJsFunc<span class="token punctuation">,</span> raw_code<span class="token punctuation">)</span>

<span class="token comment"># 输出解密文件</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'customRequest_trans.js'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fw<span class="token punctuation">:</span>
    fw<span class="token punctuation">.</span>write<span class="token punctuation">(</span>trans_code<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><p>原 JavaScript 文件：https://github.com/PPsteven/manmanbuy_js_crack/blob/master/customRequest.js</p> <p>破解后的 JavaScript 文件：https://github.com/PPsteven/manmanbuy_js_crack/blob/master/customRequest_trans_%E8%BD%AC%E7%A0%81.js</p></blockquote> <h2 id="token-参数还原"><a href="#token-参数还原" class="header-anchor">#</a> token 参数还原</h2> <p>翻译的 JavaScript 代码</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token string">'getNewParam'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">_0x182946</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 令 _0x182946 为 item</span>
        <span class="token keyword">var</span> _0x6318d4 <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token string">'XMcLK'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x53fadd</span><span class="token punctuation">(</span><span class="token parameter">_0x53992b<span class="token punctuation">,</span> _0x1be977</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                <span class="token keyword">return</span> _0x53992b <span class="token operator">!==</span> _0x1be977<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'DCftw'</span><span class="token operator">:</span> <span class="token string">'QyP'</span><span class="token punctuation">,</span>
            <span class="token string">'rzOuq'</span><span class="token operator">:</span> <span class="token string">'WgI'</span><span class="token punctuation">,</span>
            <span class="token string">'NpXrl'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x1baebf</span><span class="token punctuation">(</span><span class="token parameter">_0x37086b<span class="token punctuation">,</span> _0x2b1ab6</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 不等于</span>
                <span class="token keyword">return</span> _0x37086b <span class="token operator">!=</span> _0x2b1ab6<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'XAMWs'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x3d56be</span><span class="token punctuation">(</span><span class="token parameter">_0x2aa348<span class="token punctuation">,</span> _0x2f1927</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 不等于</span>
                <span class="token keyword">return</span> _0x2aa348 <span class="token operator">!=</span> _0x2f1927<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'coWgu'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x384c4f</span><span class="token punctuation">(</span><span class="token parameter">_0x34042d<span class="token punctuation">,</span> _0x166417</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 相加</span>
                <span class="token keyword">return</span> _0x34042d <span class="token operator">+</span> _0x166417<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'MDcDl'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x353cf4</span><span class="token punctuation">(</span><span class="token parameter">_0x1134d4<span class="token punctuation">,</span> _0xcc855d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 函数调用</span>
                <span class="token keyword">return</span> <span class="token function">_0x1134d4</span><span class="token punctuation">(</span>_0xcc855d<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'cOInn'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x1e4877</span><span class="token punctuation">(</span><span class="token parameter">_0x532487<span class="token punctuation">,</span> _0x49bb94</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 相加</span>
                <span class="token keyword">return</span> _0x532487 <span class="token operator">+</span> _0x49bb94<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> 
        _0x182946<span class="token punctuation">[</span><span class="token string">'t'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'valueOf'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 获取当前时间戳: item['t'] = 1608129001120</span>
        <span class="token keyword">let</span> _0x1a4f89 <span class="token operator">=</span> Object<span class="token punctuation">[</span><span class="token string">'keys'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x182946<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'sort'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 按照 key 排序: keys = item['keys'].sort()</span>
        <span class="token keyword">let</span> _0x3a63ba <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        _0x1a4f89<span class="token punctuation">[</span><span class="token string">'forEach'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token parameter">_0x138605</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> _0x50fa23 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// 无意义</span>
                <span class="token string">'XImOu'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0xd5995c</span><span class="token punctuation">(</span><span class="token parameter">_0x950655<span class="token punctuation">,</span> _0x4002ed</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> _0x950655 <span class="token operator">!==</span> _0x4002ed<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token string">'vsytw'</span><span class="token operator">:</span> <span class="token string">'KaZ'</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>_0x50fa23<span class="token punctuation">[</span><span class="token string">'XImOu'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x50fa23<span class="token punctuation">[</span><span class="token string">'vsytw'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> _0x50fa23<span class="token punctuation">[</span><span class="token string">'vsytw'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> 
                  <span class="token comment">// 一定是False, 执行本行</span>
                _0x3a63ba<span class="token punctuation">[</span>_0x138605<span class="token punctuation">]</span> <span class="token operator">=</span> _0x182946<span class="token punctuation">[</span>_0x138605<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// _0x182946 按照 key 依次赋值到 _0x3a63ba；令 _0x3a63ba 为 newItem</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  			<span class="token comment">// forEach(key =&gt; keys) {</span>
  			<span class="token comment">//		newItem[key] = item[key]</span>
        <span class="token comment">// }</span>
        <span class="token keyword">var</span> _0x4547db <span class="token operator">=</span> that<span class="token punctuation">[</span><span class="token string">'secret'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> _0x3c07c9 <span class="token keyword">in</span> _0x3a63ba<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>_0x6318d4<span class="token punctuation">[</span><span class="token string">'XMcLK'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">'QyP'</span><span class="token punctuation">,</span> <span class="token string">'WgI'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 一定是True</span>
                <span class="token comment">// if data[key] != null &amp;&amp; data[key] != ''</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>_0x6318d4<span class="token punctuation">[</span><span class="token string">'NpXrl'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x3a63ba<span class="token punctuation">[</span>_0x3c07c9<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> _0x6318d4<span class="token punctuation">[</span><span class="token string">'XAMWs'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x3a63ba<span class="token punctuation">[</span>_0x3c07c9<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
                    <span class="token comment">// secret += urlencode(key) + urlencode(data[key])</span>
                    _0x4547db <span class="token operator">+=</span> _0x6318d4<span class="token punctuation">[</span><span class="token string">'coWgu'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x6318d4<span class="token punctuation">[</span><span class="token string">'MDcDl'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>encodeURIComponent<span class="token punctuation">,</span> _0x3c07c9<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>_0x3a63ba<span class="token punctuation">[</span>_0x3c07c9<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                date <span class="token operator">=</span> _0x6318d4<span class="token punctuation">[</span><span class="token string">'cOInn'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">,</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        _0x4547db <span class="token operator">+=</span> that<span class="token punctuation">[</span><span class="token string">'secret'</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// data += that['secret']</span>
        _0x4547db <span class="token operator">=</span> _0x4547db<span class="token punctuation">[</span><span class="token string">'toUpperCase'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// data.toUpperCase()</span>
        <span class="token keyword">var</span> _0x20fdfc <span class="token operator">=</span> <span class="token function">hex_md5</span><span class="token punctuation">(</span>_0x4547db<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'toUpperCase'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// hex_md5(data)</span>
        _0x182946<span class="token punctuation">[</span><span class="token string">'token'</span><span class="token punctuation">]</span> <span class="token operator">=</span> _0x20fdfc<span class="token punctuation">;</span>
        <span class="token keyword">return</span> _0x182946<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><p>下面是翻译的 Python 代码</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> time
<span class="token keyword">from</span> urllib<span class="token punctuation">.</span>parse <span class="token keyword">import</span> quote
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> collections

post_data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'method'</span><span class="token punctuation">:</span> <span class="token string">'getHistoryTrend'</span><span class="token punctuation">,</span>
    <span class="token string">'key'</span><span class="token punctuation">:</span> <span class="token string">'http://item.jd.hk/10429555538.html'</span><span class="token punctuation">,</span>
    <span class="token string">'t'</span><span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">13</span><span class="token punctuation">]</span> <span class="token comment"># 13 位时间戳</span>
<span class="token punctuation">}</span>
post_data <span class="token operator">=</span> collections<span class="token punctuation">.</span>OrderedDict<span class="token punctuation">(</span> <span class="token comment"># 按照 key 排序</span>
    <span class="token builtin">sorted</span><span class="token punctuation">(</span>post_data<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
           key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>


secret <span class="token operator">=</span> <span class="token string">'c5c3f201a8e8fc634d37a766a0299218'</span> <span class="token comment"># secret 不变</span>
token <span class="token operator">=</span> secret
<span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> post_data<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    token <span class="token operator">+=</span> quote<span class="token punctuation">(</span>k<span class="token punctuation">,</span> safe<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token operator">+</span> quote<span class="token punctuation">(</span>v<span class="token punctuation">,</span> safe<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment"># Python 默认不转义 //,这个必须删掉</span>
token <span class="token operator">+=</span> secret
token <span class="token operator">=</span> token<span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 转成大写</span>
m <span class="token operator">=</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token punctuation">)</span>
m<span class="token punctuation">.</span>update<span class="token punctuation">(</span>token<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 生成 md5 码</span>
token <span class="token operator">=</span> m<span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span>
post_data<span class="token punctuation">[</span><span class="token string">'token'</span><span class="token punctuation">]</span> <span class="token operator">=</span> token <span class="token comment"># 添加 token </span>
<span class="token keyword">print</span><span class="token punctuation">(</span>post_data<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="authorization-破解"><a href="#authorization-破解" class="header-anchor">#</a> Authorization 破解</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token string">'beforeSend'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">_0x59ca01</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> _0x467e2a <span class="token operator">=</span> <span class="token punctuation">{</span>
					<span class="token string">'CZYVH'</span><span class="token operator">:</span> <span class="token string">'vBP'</span><span class="token punctuation">,</span>
					<span class="token string">'suyCt'</span><span class="token operator">:</span> <span class="token string">'Authorization'</span><span class="token punctuation">,</span>
					<span class="token string">'bLTRm'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x40c0f6</span><span class="token punctuation">(</span><span class="token parameter">_0x326d84<span class="token punctuation">,</span> _0xc7d8fa</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token keyword">return</span> _0x326d84 <span class="token operator">+</span> _0xc7d8fa<span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token string">'HCGmF'</span><span class="token operator">:</span> <span class="token string">'BasicAuth '</span>
				<span class="token punctuation">}</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>_0x467e2a<span class="token punctuation">[</span><span class="token string">'CZYVH'</span><span class="token punctuation">]</span> <span class="token operator">===</span> _0x467e2a<span class="token punctuation">[</span><span class="token string">'CZYVH'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
           <span class="token comment">// 一定执行本行</span>
					_0x59ca01<span class="token punctuation">[</span><span class="token string">'setRequestHeader'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x467e2a<span class="token punctuation">[</span><span class="token string">'suyCt'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> _0x467e2a<span class="token punctuation">[</span><span class="token string">'bLTRm'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x467e2a<span class="token punctuation">[</span><span class="token string">'HCGmF'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> _0x1901a2<span class="token punctuation">[</span><span class="token string">'getTicket'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// _0x59ca01['setRequestHeader']('Authorization', 'BasicAuth ' + this.getTicket())</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					_0x59ca01<span class="token punctuation">[</span><span class="token string">'setRequestHeader'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x467e2a<span class="token punctuation">[</span><span class="token string">'suyCt'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> _0x467e2a<span class="token punctuation">[</span><span class="token string">'bLTRm'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x467e2a<span class="token punctuation">[</span><span class="token string">'HCGmF'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> _0x1901a2<span class="token punctuation">[</span><span class="token string">'getTicket'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>getTicket 函数</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>   <span class="token operator">...</span> 
   <span class="token string">'secret'</span><span class="token operator">:</span> <span class="token string">'c5c3f201a8e8fc634d37a766a0299218'</span><span class="token punctuation">,</span>
	 <span class="token string">'getTicket'</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> _0x3bc08f <span class="token operator">=</span> <span class="token punctuation">{</span>
			<span class="token string">'ipeUV'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x5ef1ae</span><span class="token punctuation">(</span><span class="token parameter">_0x41239c<span class="token punctuation">,</span> _0x1e50a1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// a(b)</span>
				<span class="token keyword">return</span> <span class="token function">_0x41239c</span><span class="token punctuation">(</span>_0x1e50a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string">'ZadZx'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x13f13f</span><span class="token punctuation">(</span><span class="token parameter">_0x34a3cb<span class="token punctuation">,</span> _0x22d7b9</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// a &gt; b</span>
				<span class="token keyword">return</span> _0x34a3cb <span class="token operator">&gt;</span> _0x22d7b9<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string">'XDmmn'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x5cd9f2</span><span class="token punctuation">(</span><span class="token parameter">_0x47ada5<span class="token punctuation">,</span> _0x170387</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// a + b </span>
				<span class="token keyword">return</span> _0x47ada5 <span class="token operator">+</span> _0x170387<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string">'HxAAK'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x18276a</span><span class="token punctuation">(</span><span class="token parameter">_0x1835fa<span class="token punctuation">,</span> _0x2d0f0b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// a - b </span>
				<span class="token keyword">return</span> _0x1835fa <span class="token operator">-</span> _0x2d0f0b<span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token string">'DLUkx'</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">_0x149149</span><span class="token punctuation">(</span><span class="token parameter">_0x200e47<span class="token punctuation">,</span> _0x1da274</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// a - b</span>
				<span class="token keyword">return</span> _0x200e47 <span class="token operator">-</span> _0x1da274<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> _0x3f166f <span class="token operator">=</span> _0x3bc08f<span class="token punctuation">[</span><span class="token string">'ipeUV'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>$<span class="token punctuation">,</span> <span class="token string">'#ticket'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'val'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ticket = $(#ticket).val</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>_0x3bc08f<span class="token punctuation">[</span><span class="token string">'ZadZx'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x3f166f<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0x4</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// if len(ticket) &gt; 4 </span>
       <span class="token comment">// ticket = substr[lenght(ticket) - 4, 4] + substr[0, length(ticket) - 4 ]</span>
			_0x3f166f <span class="token operator">=</span> _0x3bc08f<span class="token punctuation">[</span><span class="token string">'XDmmn'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x3f166f<span class="token punctuation">[</span><span class="token string">'substr'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x3bc08f<span class="token punctuation">[</span><span class="token string">'HxAAK'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x3f166f<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0x4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0x4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _0x3f166f<span class="token punctuation">[</span><span class="token string">'substring'</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">0x0</span><span class="token punctuation">,</span> _0x3bc08f<span class="token punctuation">[</span><span class="token string">'DLUkx'</span><span class="token punctuation">]</span><span class="token punctuation">(</span>_0x3f166f<span class="token punctuation">[</span><span class="token string">'length'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0x4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> _0x3f166f<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>上面的代码就很简单</p> <ul><li>首先从 http://tool.manmanbuy.com/HistoryLowest.aspx 获取 <code>#ticket</code> 元素的值</li> <li>ticket 向右循环4个字母，即abcdefgh 变成 efghabcd</li></ul> <p>Python 翻译代码</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">create_auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    req <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://tool.manmanbuy.com/HistoryLowest.aspx'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> req<span class="token punctuation">.</span>status_code <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">:</span>
        history_price_html <span class="token operator">=</span> req<span class="token punctuation">.</span>text
        searchRet <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">r'id=&quot;ticket&quot;.+value=&quot;(?P&lt;value&gt;.+)&quot;'</span><span class="token punctuation">,</span> history_price_html<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> searchRet<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string">''</span>
        ticket <span class="token operator">=</span> searchRet<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token string">'BasicAuth '</span> <span class="token operator">+</span> ticket<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">+</span> ticket<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> <span class="token string">''</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="github-仓库"><a href="#github-仓库" class="header-anchor">#</a> Github 仓库</h2> <p><a href="https://github.com/PPsteven/manmanbuy_js_crack" target="_blank" rel="noopener noreferrer">manmanbuy_js_crack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <p><a href="https://www.myitmx.com/96.html" target="_blank" rel="noopener noreferrer">某 JS 加密逆向还原简单分析<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/PPsteven/博客笔记/edit/master/docs/15.爬虫/02.慢慢买比价爬虫(JS-逆向破解).md" target="_blank" rel="noopener noreferrer">编辑</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----> <!----></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/cf47f3/"><div>1203. 项目管理(Hard)</div></a> <span>01-13</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/e46eba/"><div>394. 字符串解码(Medium)</div></a> <span>01-12</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/72acfe/"><div>1202. 交换字符串中的元素(Medium)</div></a> <span>01-12</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div> </main></div> <div class="footer"><div class="icons"><a href="mailto:932163071@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/ppsteven" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=119082966" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2021
    <span>majutsushi.world All rights reserved | <a href="https://beian.miit.gov.cn" target="_blank" class="text" rel="noreferrer nofollow">沪ICP备2020031729号-1</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.4d262576.js" defer></script><script src="/assets/js/2.5acc95b9.js" defer></script><script src="/assets/js/3.ddda9efe.js" defer></script>
  </body>
</html>