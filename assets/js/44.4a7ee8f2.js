(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{581:function(s,a,e){"use strict";e.r(a);var n=e(24),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("用 "),e("code",[s._v("docker")]),s._v(" 安装需要用到的服务实在是太方便了，我们下面介绍一些好的轮子来用。")]),s._v(" "),e("ul",[e("li",[s._v("web-vscode: 搭建一个web版的vscode，不过实测下来不是特别好用。很多"),e("code",[s._v("vscode")]),s._v("上的插件用不了")]),s._v(" "),e("li",[s._v("redis web: web端的web管理工具，不过配置起来稍微有点麻烦。")]),s._v(" "),e("li",[s._v("lamp: php基础开发环境")])]),s._v(" "),e("h2",{attrs:{id:"web-vscode-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#web-vscode-安装"}},[s._v("#")]),s._v(" web-vscode 安装")]),s._v(" "),e("blockquote",[e("p",[s._v("传送门: "),e("a",{attrs:{href:"https://github.com/cdr/code-server",target:"_blank",rel:"noopener noreferrer"}},[s._v("code-server"),e("OutboundLink")],1)])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f vscode \ndocker run "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台运行")]),s._v("\n-d "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 总是运行")]),s._v("\n--restart"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Alias")]),s._v("\n--name web_vscode "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hostname")]),s._v("\n-h vscode "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一定要以root账号运行,不然会报 Permission denied")]),s._v("\n-u root "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 所有端口映射，而不要是127.0.0.1")]),s._v("\n-p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8086")]),s._v(":8080 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" \n-v "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${"),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),s._v("}")]),s._v('/.local/share/code-server:/home/coder/.local/share/code-server"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 密码是通过环境变量加入的")]),s._v("\n-e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PASSWORD")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mycode "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" \n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# $PWD 是当前希望项目放置的位置")]),s._v("\n-v "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PWD")]),s._v(':/home/coder/project"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 镜像名，本地不存在的话，会从仓库拉取")]),s._v("\ncodercom/code-server:v2  \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -l\ndocker logs web_vscode \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br")])]),e("p",[s._v("运行成功后")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("info  Server listening on http://0.0.0.0:8080\ninfo    - Password is 558ba38067432e3beddf1228\ninfo      - To use your own password, "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" the PASSWORD environment variable\ninfo      - To disable use "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),s._v("--auth none"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\ninfo    - Not serving HTTPS\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("由于我们的 web-vscode 是运行在容器内的，所以很多环境我们需要自己配置，参考上述操作。")]),s._v(" "),e("h2",{attrs:{id:"redis-web-管理工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis-web-管理工具"}},[s._v("#")]),s._v(" redis web 管理工具")]),s._v(" "),e("p",[s._v("mac 上 redis 管理工具破解版不好找，但是在 github 上找到了一个开源的工具，非常方便。拿来用一下")]),s._v(" "),e("blockquote",[e("p",[s._v("传送门: "),e("a",{attrs:{href:"https://github.com/erikdubbelboer/phpRedisAdmin",target:"_blank",rel:"noopener noreferrer"}},[s._v("phpRedisAdmin"),e("OutboundLink")],1)])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker pull erikdubbelboer/phpredisadmin\ndocker run --rm -itd -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REDIS_1_HOST")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("redis -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("REDIS_1_NAME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myredis  -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8015")]),s._v(":80  --link redis-test:redis --name redisadmin erikdubbelboer/phpredisadmin\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要注意的是 REDIS_1_HOST 填写的是自己 redis 服务器的地址")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里我采用的是容器链接的方式")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("h3",{attrs:{id:"redis-redis可视化工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis-redis可视化工具"}},[s._v("#")]),s._v(" redis & redis可视化工具")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker pull redis\ndocker run -p 127.0.0.1:6379:6379 -d --name redis redis --requirepass \"mypassword\"\n\n\n# 查看redis的ip地址 172.17.0.2\ndocker inspect redis | grep -ai 'ipa'\ndocker run --rm -it -e REDIS_1_HOST=172.17.0.2 -e REDIS_1_NAME=redis -p 80:80 erikdubbelboer/phpredisadmin\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"php-lamp-环境搭建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#php-lamp-环境搭建"}},[s._v("#")]),s._v(" php LAMP 环境搭建")]),s._v(" "),e("p",[s._v("利用 "),e("code",[s._v("docker")]),s._v(" 搭建 LAMP 环境本身应该是比较省力气的方式，但是网上 "),e("code",[s._v("CSDN")]),s._v(" 之类的教程很多都是复制黏贴，很多实现不了，优质教程很少。目前发现了国外的一个 "),e("code",[s._v("linode")]),s._v(" 的 docke r镜像，有非常详细的教程，很好用。")]),s._v(" "),e("blockquote",[e("p",[s._v("linode 详细配置，请看")]),s._v(" "),e("ul",[e("li",[s._v("https://hub.docker.com/r/linode/lamp")]),s._v(" "),e("li",[s._v("https://www.linode.com/docs/applications/containers/how-to-install-docker-and-deploy-a-lamp-stack/")])])]),s._v(" "),e("h3",{attrs:{id:"docker-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装"}},[s._v("#")]),s._v(" docker 安装")]),s._v(" "),e("p",[s._v("docker 环境搭建请看我的 "),e("a",{attrs:{href:"https://ppsteven.github.io/2020/01/12/centos-install-introduction/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Centos 环境配置（持续总结）"),e("OutboundLink")],1),s._v(" 这一篇教程")]),s._v(" "),e("h3",{attrs:{id:"拉取docker镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#拉取docker镜像"}},[s._v("#")]),s._v(" 拉取docker镜像")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker search -s 10 lamp")]),s._v("\nFlag --stars has been deprecated, use --filter"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("stars"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" instead\nNAME                DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nmattrayner/lamp     A simple LAMP docker image running the prere…   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("211")]),s._v("                                     "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nlinode/lamp         LAMP on Ubuntu "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.04")]),s._v(".1 LTS Container            "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("178")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". linode 的镜像 star数还是比较高的\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sudo docker pull linode/lamp")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h3",{attrs:{id:"生成配置文件目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成配置文件目录"}},[s._v("#")]),s._v(" 生成配置文件目录")]),s._v(" "),e("p",[s._v("这一步很多教程里面都缺失的一部分，lamp 的很多文件需要映射到宿主机，方法后面的配置。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动进入容器 ")]),s._v("\n$ docker run -itd --name lamp linode/lamp:latest /bin/bash\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将需要映射的文件拷贝出来，主要就是 apache2, mysql的配置文件 和 www文件夹")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── apache2.conf\n├── my.cnf\n└── www\n    ├── example.com\n    │   ├── backups\n    │   ├── log\n    │   └── public_html\n    └── html\n        └── index.html\n \n$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" lamp:/var/www /Users/xxx/Documents/Dockerfile/lamp/www\n$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" lamp:/etc/apache2/apache2.conf  /Users/xxx/Documents/Dockerfile/lamp/apache2.conf\n$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" lamp:/etc/mysql/my.cnf /Users/xxx/Documents/Dockerfile/lamp/my.cnf\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除旧的容器")]),s._v("\n$ docker container "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f lamp\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("h3",{attrs:{id:"启动容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动容器"}},[s._v("#")]),s._v(" 启动容器")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8010")]),s._v(":80 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3309")]),s._v(":3306 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n         -v /Users/ppsteven/Documents/Dockerfile/lamp/www:/var/www "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n         -v /Users/ppsteven/Documents/Dockerfile/lamp/apache2.conf:/etc/apache2/apache2.conf "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n         -v /Users/ppsteven/Documents/Dockerfile/lamp/my.cnf:/etc/mysql/my.cnf "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n         --name lamp "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n         -itd linode/lamp:latest /bin/bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("h3",{attrs:{id:"启动-apache-和-mysql-服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动-apache-和-mysql-服务"}},[s._v("#")]),s._v(" 启动 Apache 和 MySQL 服务")]),s._v(" "),e("p",[s._v("容器内部的 Apache 和 MySQL 服务是默认不自动启动的（当 LAMP 重启的时候需要注意查看这两个服务是否也启动了）")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" apache2 start\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"mysql-初始化配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql-初始化配置"}},[s._v("#")]),s._v(" MySQL 初始化配置")]),s._v(" "),e("p",[s._v("这一步是很多地方没有提的，linode 的 MySQL 是有默认密码，"),e("code",[s._v("Admin2015")]),s._v("。我们需要初始化对于 MySQL 数据库的配置。")]),s._v(" "),e("blockquote",[e("p",[s._v("参考：https://zhuanlan.zhihu.com/p/111605563")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如下命令即可")]),s._v("\nmysql_secure_installation\n按下回城键你会看见结尾如下的对话。\n\nEnter current password "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" root "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("enter "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" none"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(": "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\nSet root password? "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否设置root用户密码  y")]),s._v("\nNew password: "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新密码")]),s._v("\nRe-enter new password: \nRemove anonymous users? "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否删除匿名用户，回车 y")]),s._v("\nDisallow root login remotely? "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否禁止root远程登录")]),s._v("\nRemove "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" database and access to it? "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否删除test数据库")]),s._v("\nReload privilege tables now? "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Y/n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 是否重新加载权限表  y")]),s._v("\nAll done"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" If you’ve completed all of the above steps, your MariaDB\ninstallation should now be secure.\nThanks "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" using MariaDB"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试登录")]),s._v("\nmysql -uroot -p"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"自己的数据库密码"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br")])]),e("h3",{attrs:{id:"测试是否成功"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#测试是否成功"}},[s._v("#")]),s._v(" 测试是否成功")]),s._v(" "),e("p",[s._v("游览器输入 http://localhost:8010/ ，看到如下信息，表示成功")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('The Docker LAMP stack is working.\nThe configuration information can be found here or here\nThis index.html file is located in the "/var/www/example.com/public_html" directory.\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h2",{attrs:{id:"mysql-8-0-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mysql-8-0-安装"}},[s._v("#")]),s._v(" MySQL 8.0 安装")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker pull mysql:8.0 "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拉取镜像")]),s._v("\ndocker run -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3307")]),s._v(":3306 --name mysql8.0 -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MYSQL_ROOT_PASSWORD")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("root -d mysql:8.0 "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动容器")]),s._v("\ndocker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it mysql8.0 "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入容器")]),s._v("\nmysql -uroot -p "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录mysql")]),s._v("\nalter user "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),s._v("@"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'%'")]),s._v(" identified with mysql_native_password by "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'我的密码'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改三点： 1.运行外部访问 2.MySQL加密方式 3.密码")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("h2",{attrs:{id:"排查问题方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#排查问题方法"}},[s._v("#")]),s._v(" 排查问题方法")]),s._v(" "),e("h3",{attrs:{id:"docker-退出"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-退出"}},[s._v("#")]),s._v(" docker 退出")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# 千万不要用 exit，容器会跟着退出的\nCTRL + P + Q\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"docker-ip查看"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-ip查看"}},[s._v("#")]),s._v(" docker ip查看")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("进入容器查看，这种方法可能会失败，因为可能容器的系统中没有对应的命令工具")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker exec -ti <NAME OR ID> /bin/bash\n# ifconfig/ip addr \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("最正统的写法(可以写在 shell 脚本里)")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker inspect --format '{{ .NetworkSettings.IPAddress }}' 2e23d01384ac")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("最简单查询的写法")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ docker inspect lamp "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -ai "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ipa'")]),s._v("\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"SecondaryIPAddresses"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n            "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAddress"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.2"')]),s._v(",\n                    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAMConfig"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" null,\n                    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IPAddress"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"172.17.0.2"')]),s._v(",\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])])])]),s._v(" "),e("h3",{attrs:{id:"docker-日志排查（tail-f-dev-null）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-日志排查（tail-f-dev-null）"}},[s._v("#")]),s._v(" docker 日志排查（tail -f /dev/null）")]),s._v(" "),e("p",[s._v("利用 "),e("code",[s._v("tail -f /dev/null")]),s._v(" 长命令阻塞，不让容器立马结束，这种用法非常好用")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -ti "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("NAME OR ID"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -f /dev/null\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);