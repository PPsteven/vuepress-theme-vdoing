(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{586:function(s,t,a){"use strict";a.r(t);var n=a(24),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("最近经常需要从github上拉代码下来，速度实在是太慢了。所以写这篇文件，来好好总结一下提速的方法。")]),s._v(" "),a("p",[s._v("总的来说，方法有 替换 "),a("strong",[s._v("镜像源/修改hosts/使用国内托管平台/使用代理")])]),s._v(" "),a("p",[s._v("经过实验下来，使用代理的效果最好")]),s._v(" "),a("h2",{attrs:{id:"使用镜像源-推荐"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用镜像源-推荐"}},[s._v("#")]),s._v(" 使用镜像源(推荐)")]),s._v(" "),a("blockquote",[a("p",[s._v("参考 "),a("a",{attrs:{href:"https://www.zhihu.com/question/27159393",target:"_blank",rel:"noopener noreferrer"}},[s._v("知乎Don.hub"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("替换 github 镜像网站，把 "),a("code",[s._v("github.com")]),s._v(" 替换成 "),a("code",[s._v("github.com.cnpmjs.org")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("https://github.com/graykode/nlp-tutorial\nhttps://github.com.cnpmjs.org/graykode/nlp-tutorial\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("这个方法最简单，提速效果还是很明显的。当然缺点也是很明显的，就是如果是一些不知名的项目，就没有对应的镜像源可以用了。")]),s._v(" "),a("h2",{attrs:{id:"修改hosts（不推荐）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改hosts（不推荐）"}},[s._v("#")]),s._v(" 修改hosts（不推荐）")]),s._v(" "),a("p",[s._v("DNS污染是GFW的一个重要手段，通过修改 hosts 文件来直接绕过DNS解析是一个不错的方法。这是一个主流的解决方法，但是实测下来效果并不显著。")]),s._v(" "),a("p",[a("strong",[s._v("第一步: 找到以下两个域名对应最快的 ip 地址")])]),s._v(" "),a("p",[s._v("查 ip 地址： https://www.ipaddress.com")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("github.global.ssl.fastly.net  \ngithub.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("第二步: 将找到的对应的 ip 添加至 hosts ( 地址: /etc/hosts)")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 举个例子\n213.54.23.32 github.global.ssl.fastly.net  \n212.44.53.42 github.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"使用国内托管平台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用国内托管平台"}},[s._v("#")]),s._v(" 使用国内托管平台")]),s._v(" "),a("p",[s._v("通过国内托管平台，如码云 "),a("code",[s._v("gitee/阿里云/oschaina")]),s._v(" 等作为中转，将代码 fork 到自己的仓库下。然后去 clone 对应仓库的repo，基本可以到达满速。")]),s._v(" "),a("p",[s._v("搬运教程：https://zhuanlan.zhihu.com/p/111697412")]),s._v(" "),a("p",[s._v("这也是一个不错的方法，就是稍微有点烦。而且对于小白来说，还容易碰到一个问题是，在使用 SSH 方式拉代码的话，需要碰到多个秘钥管理的麻烦事情。")]),s._v(" "),a("h2",{attrs:{id:"代理服务器（选择方案）"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代理服务器（选择方案）"}},[s._v("#")]),s._v(" 代理服务器（选择方案）")]),s._v(" "),a("p",[s._v("最后我采用的是这个方案，参考 "),a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/87559002",target:"_blank",rel:"noopener noreferrer"}},[s._v("这篇教程"),a("OutboundLink")],1),s._v("。如果你手里有一台海外的VPS，就非常简单。")]),s._v(" "),a("h3",{attrs:{id:"本地代理加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地代理加速"}},[s._v("#")]),s._v(" 本地代理加速")]),s._v(" "),a("p",[a("strong",[s._v("第一步: 查看你的连接工具的监听端口")])]),s._v(" "),a("p",[s._v("连接 VPS 的工具各不相同，这里以最常使用的 "),a("code",[s._v("shadowssocks")]),s._v(" 为例，选择 "),a("code",[s._v("偏好设置->高级")]),s._v(" 就可以查看 socks5 监听的端口。")]),s._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200507235526.png"}}),s._v(" "),a("p",[a("strong",[s._v("第二步：设置代理转发的端口")])]),s._v(" "),a("p",[a("strong",[s._v("设置全局代理")])]),s._v(" "),a("p",[s._v("全局代理设置后，所有 git 的 http/https 都会走我们的代理端口")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SOCKS5 协议，1080 端口修改成自己的本地 SOCKS5 代理端口")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global http.proxy socks5://127.0.0.1:1080\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global https.proxy socks5://127.0.0.1:1080\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# HTTP 协议，1081 端口修改成自己的本地 HTTP 代理端口")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global http.proxy http://127.0.0.1:1081\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global https.proxy https://127.0.0.1:1081\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[a("strong",[s._v("设置局部代理")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# SOCKS5 协议，1080 端口修改成自己的本地 SOCKS5 代理端口")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global http.https://github.com.proxy socks5://127.0.0.1:1080\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global https.https://github.com.proxy socks5://127.0.0.1:1080\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# HTTP 协议，1081 端口修改成自己的本地 HTTP 代理端口")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global http.https://github.com.proxy https://127.0.0.1:1081\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global https.https://github.com.proxy https://127.0.0.1:1081\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("设置后，我们可以打开 "),a("code",[s._v("~/.gitconfig")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('[http "https://github.com"]\n        proxy = socks5://127.0.0.1:1080\n[https "https://github.com"]\n        proxy = socks5://127.0.0.1:1080\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("或者 "),a("code",[s._v("git config --global -l")]),s._v(" 查看配置是否生效")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("http.https://github.com.proxy=socks5://127.0.0.1:1080\nhttps.https://github.com.proxy=socks5://127.0.0.1:1080\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("strong",[s._v("取消代理")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消局部代理")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global --unset http.https://github.com.proxy\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global --unset https.https://github.com.proxy\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消全局代理")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global --unset http.proxy\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" config --global --unset https.proxy\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"远程代理加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#远程代理加速"}},[s._v("#")]),s._v(" 远程代理加速")]),s._v(" "),a("p",[s._v("本地代理的话，对于在个人电脑上开发是很有帮助的。但是如果服务器也要 "),a("code",[s._v("git加速")]),s._v(" 的话就比较麻烦了，还要在服务器上配置一遍本地代理。与其这样做，不如直接在服务器端开一个代理来的方便。")]),s._v(" "),a("h4",{attrs:{id:"服务器端的基本配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#服务器端的基本配置"}},[s._v("#")]),s._v(" 服务器端的基本配置")]),s._v(" "),a("div",{staticClass:"language-diff line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-diff"}},[a("code",[s._v("# 安装 shadowsocks\nsudo pip install shadowsocks\n# 创建配置文件\n{\n"),a("span",{pre:!0,attrs:{class:"token unchanged"}},[a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v('   "server":"*.*.*.*",\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v('   "server_port":***,\n')])]),a("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[a("span",{pre:!0,attrs:{class:"token prefix inserted"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v('    "local_server":"0.0.0.0", # 默认127.0.0.1\n')])]),a("span",{pre:!0,attrs:{class:"token unchanged"}},[a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v('   "local_port":1081,\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v('   "password":"*****",\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v('   "timeout":600,\n')]),a("span",{pre:!0,attrs:{class:"token prefix unchanged"}},[s._v(" ")]),a("span",{pre:!0,attrs:{class:"token line"}},[s._v('   "method":"aes-256-cfb"\n')])]),s._v("}\n# 后台运行\nnohup /root/miniconda2/envs/base/bin/sslocal -c ss.json >> ss.log 1>2&\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("blockquote",[a("p",[s._v("注意: 这里需要添加一行配置，"),a("code",[s._v("0.0.0.0")]),s._v(" 表示监听所有端口，原先默认 "),a("code",[s._v("127.0.0.1")]),s._v(" 只监听本地端口")]),s._v(" "),a("p",[s._v("P.S. 查看服务器绑定端口的命令:  "),a("code",[s._v("netstat -tunlp")]),s._v(" "),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200508005806.png",alt:""}})])]),s._v(" "),a("p",[s._v("有了远端代理，所有东西突然就方便了很多。所有的配置都只要走 "),a("code",[s._v("x.x.x.x:1081")]),s._v(" 转发一下就可以了。因为我们本地的代理并不是会一直开着的，而远端的代理是一直存在的。")]),s._v(" "),a("h3",{attrs:{id:"baacloud-加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#baacloud-加速"}},[s._v("#")]),s._v(" Baacloud 加速")]),s._v(" "),a("p",[s._v("由于我是用的我弟弟的 Baacloud，这种FQ工具提供的不是一台机器，而是多台机器的地址。由于有很多人用，所以每个节点拥挤程度不同。我自己编了一个小脚本，获取每个节点的 PING 值，选择延时最低的节点连接。")]),s._v(" "),a("p",[s._v("具体的文章后续更新")]),s._v(" "),a("ul",[a("li",[s._v("[ ] Baacloud 优化方法")])]),s._v(" "),a("h2",{attrs:{id:"缺点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缺点"}},[s._v("#")]),s._v(" 缺点")]),s._v(" "),a("p",[s._v("经过测试下来，我的 github 拉代码的速度从 4kb 一下子提到了 100+ kb/s。有人觉得这个速度也并不快，但是实际上已经达到了速度的上线了。")]),s._v(" "),a("p",[s._v("我远端服务器使用的是国内腾讯云的服务器 (学生优惠时候办的)，但是只有 1M 的小水管 (带宽的上限制也就是125kb/s) ，所以 git 也到达满速了。")]),s._v(" "),a("p",[s._v("经过这个事情，我比较了一下国内外VPS的价格，发现除了考虑 硬盘/内存 以外，国内外的VPS带宽的差距是真的打。国内的带宽普遍是1/2M的小水管，国外的都能到达 1G。")]),s._v(" "),a("p",[s._v("后续我可能考虑找一个稳定的海外VPS重新搞一下。")]),s._v(" "),a("h2",{attrs:{id:"socks5-http-https代理的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#socks5-http-https代理的区别"}},[s._v("#")]),s._v(" Socks5/http/https代理的区别")]),s._v(" "),a("blockquote",[a("p",[s._v("作者：黎明\n链接：https://www.zhihu.com/question/65960461/answer/505625432\n来源：知乎\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。")])]),s._v(" "),a("p",[s._v("知乎上看到一个回答")]),s._v(" "),a("p",[s._v("HTTP 代理是基于 HTTP 协议的，属于"),a("strong",[s._v("应用层协议")]),s._v("，一般只会代理转发 HTTP 请求，也可以通过CONNECT 方法来实现一般 TCP 的代理转发。")]),s._v(" "),a("p",[s._v("而 Socks5 代理则相对底层一些，属于 "),a("strong",[s._v("会话层协议")]),s._v(" ，它直接通过协议握手来进行连接，并直接修改报头来实现转发，所以速度非常快，并且支持对 FTP 甚至是 UDP 进行代理转发，功能比 HTTP 代理要强大很多。")]),s._v(" "),a("p",[s._v("两个代理在 OSI 模型中的位置：")]),s._v(" "),a("p",[a("strong",[s._v("物理层 < 数据链路层 < 网络层 < 传输层 < 会话层[socks5] < 表示层 < 应用层[http]")])]),s._v(" "),a("p",[s._v("实际使用时，一般建议是在支持的时候使用 Socks5，不支持 Socks5 的话就用 HTTP。")]),s._v(" "),a("h2",{attrs:{id:"腾讯云被封"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#腾讯云被封"}},[s._v("#")]),s._v(" 腾讯云被封")]),s._v(" "),a("p",[s._v('博客写好没一天，我的这个远程代理就被腾讯云检测到了。不知道是哪个"用户"举报的我。为了解决这个方法，我感觉最好的还是买一个国外的VPS。')]),s._v(" "),a("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200508183725.png"}}),s._v(" "),a("h3",{attrs:{id:"方案流程图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#方案流程图"}},[s._v("#")]),s._v(" 方案流程图")]),s._v(" "),a("p",[s._v("为了不让腾讯云发现的话，可以选择使用 frp 代理，在腾讯云上做一个端口转发，发到我家里闲置的电脑上，然后在本地搭代理。这样饶了一圈，会特别烦，但是应该可以躲避腾讯云的监控（虽然我不知道怎么被发现的）。")]),s._v(" "),a("p",[s._v("此外，socks5 代理开启的时候，最好要加上演验证策略。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200508190504.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/87559002",target:"_blank",rel:"noopener noreferrer"}},[s._v("Git 命令行加速"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.zhihu.com/question/65960461/answer/505625432",target:"_blank",rel:"noopener noreferrer"}},[s._v("Socks5/http/https代理的区别"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("知乎上还有一位大佬深入整理了一套代理的技术文章")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/28645864",target:"_blank",rel:"noopener noreferrer"}},[s._v("由浅入深写代理(3) -socks5 代理"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);