(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{585:function(s,t,n){"use strict";n.r(t);var a=n(24),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("主要记录 git 在实际使用中碰到的问题，会逐步慢慢积累")]),s._v(" "),n("h3",{attrs:{id:"问题一：新项目如何与远端同步？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题一：新项目如何与远端同步？"}},[s._v("#")]),s._v(" 问题一：新项目如何与远端同步？")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" origin git@e.coding.net:datamate/pujiangjiaoye.git "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加远端仓库")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" branch --set-upstream-to"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("origin/master "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置分支对应关系")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push --set-upstream origin master "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置push 对应的远程仓库，建立本地分支的上游")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" remote -v "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看分支")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("当我们尝试push的时候又会出现一个问题")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("error: 推送一些引用到 "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'git@e.coding.net:datamate/pujiangjiaoye.git'")]),s._v(" 失败\n提示：更新被拒绝，因为您当前分支的最新提交落后于其对应的远程分支。\n提示：再次推送前，先与远程变更合并（如 "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'git pull ...'")]),s._v("）。详见\n提示："),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'git push --help'")]),s._v(" 中的 "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Note about fast-forwards'")]),s._v(" 小节。\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按照提示，尝试用git pull 合并,又失败")]),s._v("\n$ "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull\nfatal: 拒绝合并无关的历史\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("原因是我们本地与远程的版本不一致，但是我们是新提交，怎么会出现这样的问题呢？\n因为很多平台在我们创建项目的时候，自动帮我们创建了README.md文件，所以会有不一致的情况存在。git pull 失败的原因是，两个不一致的文件没有***共同祖先的历史***。")]),s._v(" "),n("p",[s._v("解决方法也很简单")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull origin master --allow-unrelated-histories \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200124225406.png",alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200124225457.png",alt:""}})]),s._v(" "),n("h3",{attrs:{id:"问题二：如何修改上一次的提交？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题二：如何修改上一次的提交？"}},[s._v("#")]),s._v(" 问题二：如何修改上一次的提交？")]),s._v(" "),n("p",[s._v("git 是分支管理的工具，我们的工作最好在一个 commit 中提交相应的代码，完成一个功能（如 bugfix 或者 feature_add ）。但是有的时候，我们的提交经过 Code Review 之后，可能会被打回来。这样面对新的修改，不应该重复提交。")]),s._v(" "),n("p",[s._v("首先，我们可以先建立一个提交。面对第二个文件（这里我们给 a 新增了 Hello world again ）")]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200124225533.png",alt:""}})]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200124225610.png",alt:""}})]),s._v(" "),n("p",[s._v("第一种选择，我们提交两个 commit")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"second commit"')]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200124225659.png",alt:""}})]),s._v(" "),n("blockquote",[n("p",[s._v("第二种选择，我们直接修改上一次的修改（推荐）")])]),s._v(" "),n("p",[s._v("工作流如下")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit --amend "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 代表直接在上一次的提交修改，这里会弹出上一次 commit 的信息。")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -f "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 由于我们只是改了本地，提交的时候使用 -f 强制推送一下")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("blockquote",[n("p",[s._v("这里强烈建议，使用 --amend 的方法的时候，一定要检查 commit 的信息，确定不是把别人的给冲掉了。")])]),s._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/PPsteven/pictures/img/20200124225740.png",alt:""}})]),s._v(" "),n("h3",{attrs:{id:"问题三：服务器端强制同步远端-git-仓库？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题三：服务器端强制同步远端-git-仓库？"}},[s._v("#")]),s._v(" 问题三：服务器端强制同步远端 git 仓库？")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" fetch \n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" reset  --hard origin/master "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 要强制同步的分支！--hard 是丢弃分支的修改")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull\nAlready up-to-date.\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"问题四：为什么修改了-gitignore-文件，忽略项还是不起作用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#问题四：为什么修改了-gitignore-文件，忽略项还是不起作用"}},[s._v("#")]),s._v(" 问题四：为什么修改了 "),n("code",[s._v(".gitignore")]),s._v(" 文件，忽略项还是不起作用")]),s._v(" "),n("p",[s._v("新建的文件在git中会有缓存，如果某些文件已经被纳入了版本管理中，就算是在.gitignore中已经声明了忽略路径也是不起作用的，这时候我们就应该先把本地缓存删除，然后再进行git的push")]),s._v(" "),n("p",[s._v("git清除本地缓存命令如下：")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -r --cached "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("下面附上我的 "),n("code",[s._v(".gitignore")]),s._v(" 文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# Windows:\nThumbs.db\nehthumbs.db\nDesktop.ini\n\n# MAC:\n*.DS_Store\n\n# Python:\n*.py[cod]\n*.so\n*.egg\n*.egg-info\ndist\nbuild\n\n# My configurations:\n*.log\n*.log.*\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("p",[s._v("如何使用 git merge")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开发分支（dev）上的代码达到上线的标准后，要合并到 master 分支")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout dev\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull \n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge dev\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -u origin master\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当master代码改动了，需要更新开发分支（dev）上的代码")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout master \n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" pull \n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" checkout dev "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这里默认dev 远端没有动")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" merge master \n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push -u origin dev\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("blockquote",[n("p",[s._v("参考: "),n("a",{attrs:{href:"https://blog.csdn.net/zl1zl2zl3/article/details/94019526",target:"_blank",rel:"noopener noreferrer"}},[s._v("git merge最简洁用法"),n("OutboundLink")],1)])]),s._v(" "),n("p",[s._v("推荐一个 "),n("code",[s._v("git merge")]),s._v(" 比较好的教程： "),n("a",{attrs:{href:"https://www.jianshu.com/p/1a7e38cdbf76",target:"_blank",rel:"noopener noreferrer"}},[s._v("merge：合并 commits"),n("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);